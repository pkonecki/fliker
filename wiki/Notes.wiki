= Notes =


* /!\documentation à faire/!\*


===Urgences===
  * PAIEMENTS:
    * calcul auto promo
    * calcul auto total du paiement (pour comparaison avec val du chq)
    * stocker/afficher : paiement enregistré par "nom" le "date"
    * gestion statut : préinscrit/partiel/àjour/résilié
  * PROMOS :
    * bouton changer promo pour affichage
  * RECHERCHE :
    * bouton pour n'afficher que les "responsables" (ass/sec/act/cre)
  * ADHESIONS :
    * gestion des adhésions impossibles (archiver/notifier ces demandes)
  * ADHERENTS :
    * bouton pour changer son passwd

  * Table types de suppléments (cotiz, location, caution, supplément)
  * Table types de paiements (cheque/espece/cb/dispense)
  * Association destinataire table supplément
  * <s>Table mère pour asso/section/act/cre</s>
  * <s>Changer id_statut en id_asso_adh pour sec/act/cre</s>
  * Adhesion: Ne pas afficher les créneaux sans prof/responsables au dessus
  * Adhesion: Pour un sport, calculer l'asso possible seulement si il y'a un supplément au niveau de la section au moins. Mais tout afficher (inscription illégitime) : "Impossible pour l'instant" 
  * Ajouter gestion select dans recherche


===Config/Install du logiciel===
  * Fichier de config avec url site, params connexion sql ...


===Login/Logout===
  * bouton "j'ai oublié mon passwd" -> renvoyer un cookie par email
  * bouton "je suis un gros boulet" -> rediriger vers "RT"


===Notion de promo===
  * Page admin :
    * changer de promo courante (stocker dans table sql)
    * booléen mode standby (inscriptions ok mais pas d'adhesions)
  * <s>Champ promo dans adhesions/paiements</s>
  * <s>Champ promo dans présences</s>


===Changements UML===
    * <s>Nouveau supplément_cotisation asso</s>
    * <s>Supprimer champs cotisation dans asso</s>
    * <s>Généraliser Responsables (idem suppléments)</s>
    * <s>Supprimer lien id_prof adherent <> créneau</s>
    * <s>généraliser supplément sections / activité / creneaux </s>
    * <s>question association gestionnaire (reverser le supplément à la bonne association)</s>


===Associations===
  * Tables des statuts (etudiant/personel/exterieur)
  * +table d'associations possibles pour un statut (ex: etudiant -->Asesco et PSUC)
  * Choix des créneaux
  * Calcul des associations auxquelles s'inscrire par critère de priorité :
    # Maximum de sports
    # Minimum d'associations
    # Cout minimum
    # Random si plusieurs choix (rare)


===Sports===
  * Catégorie (basse priorité) : table de catégories + table de hash activité/categorie
    * Fonction de saisie/modif catégorie d'activité pour responsable activité + admin etc... 
  * <s>description</s>
  * <s>logo</s>


===Adhérents===
  * id_asso/num_carte -> table (plusieurs assos pour un adherent)
    * <s>Faire table de hash entre adh et asso</s>
  * <s>modularité -> deux tables : data + description des data </s>
  * <s>vérification : langage simplifié de format (à determiner)</s>
  * Séparer données login/données perso? Customisation supplémentaire assos locales	
  * -preinscription --> +date creation
  * <s>+signature valide quand adresse email validée</s>
  * +adresse professionnelle (cf customisation locale PSUC)
  * <s>+numéro d'agent</s>(cf numayantdroit : numéro de carte étudiant/CNRS etc...)
  * +champ exemple dans champs_adherent
  * +choix assurance : j'ai lu ou non / j'accepte ou non
  * +droit à l'image oui/non
  * <s>numcarte = numéro de carte asesco/PSUC etc...</s>
  * Champs date validation cookie/gestionnaire
  * Deux champs nom / tel pour personnes à contacter en cas d'urgence
  * <s>+ Statut (exterieur/CNRS/UFR Science/Droit/Pharma/Medecine/STAPS/IUT Orsay/Cachan/Sceaux/Polytech'ParisSud/Supoptique/Supélec/X/INRIA/CEA/autres académique)</s>
  * Vérification : case a cocher pour certain champs (doit être verifier) ex: numayantdroit/certificat med
    * LDAP utilisera cette case
    * Table de hash champ adherent <-> adherent + date


===Inscriptions===
  * <s>conservation données en post</s>
  * captcha? en confirmation (basse priorité)
  * <s>identifiant : email</s>
    * Demander 2 fois email
  * <s>gestion de password</s>
    * <s>Mot de passe : à la vérification, encryption md5</s> + salt
  * liste des sports:
    * <s>page séparée : oui</s>
    * liste dynamique en fct statut (etu/pers) /age/critères personalisés(prix/lieu/type/horaire)...
    * encourager l'inscription chez d'autres assos (liste unique + pop up d'info hover)
  * Scénario d'inscription:
    * recherche par critère (portail sport) --> inscription
    * inscription -->liste de sports alphabétique
  * Stocker dans un repertoire en modifiant le nom du fichier : id.ext		
    * Certificat médical
    * <s>photo</s>
    * Métadata des champs images:
      * Permanent o/n
      * Date de purge
      * Age de purge
      * Extension du format par défaut
      * Taille de redimensionnement par défaut
      * Taille thumb
  * Compétiteur : vrai /faux
    * Basse priorité
    * Gestion via fonctions existantes (section/activité/supplément) : documenter
  * Case a cocher : je n'ai pas d'adresse email
    * Possibilité de rajouter l'adresse email par le bureau plus tard --> envoie d'email de confirmation
  * Catégorie Homme/Femme --> Masculin/Féminin


===Paiements===
  * <s>Faire table de hash paiement < - > adhésion </s>
  * Numéro de carte asesco: en générer un qu'a partir du moment ou l'inscription est validée/payée
    * possibilité de créer un nouveau numéro (carte perdue)
    * ne pas créer un numéro si il existe déjà
    * Boite avec propositions de numéro libres et possibilité de remplir un numéro à la main en vérifiant la disponibilité à la volée
  * Solde: prendre adhesion selon mycréneau puis selects paiements de ces adhesions


===Présences===
  * <s> Table de hash créneau < - > adhérent </s>
    * <s> Afficher/Remplir présence -> pour chaque créneau dont je suis responsable : tableau adhérents / semaines avec cases à cocher </s>
    * <s> Affichage / archivage selon promo </s>
    * Imprimer fiche de présence
  * Evénements exceptionnels (stages, matchs...) : table spéciale ?
  * Stocker dates vac et fériés pour supprimer colonnes présences ?


===Recherches===
  * Recherche modulaire : 
    * <s>Ajouter regles de recherche / et </s>/ou
    * <s>Par defaut: nom,prénom,email,catégorie (détecter si vide) -> utiliser table des champs</s>
    * Selection des colonnes à afficher
  * Critères:
    * <s>Nom, Prénom, Email, Catégorie (masculin/féminin)</s>
    * <s>Par créneau, activité, section, asso, --> menu arbre</s>
      * Décocher automatiquement si vide en dessous
    * <s>Check : Avec ou sans photo</s>
    * Afficher seulement les profs / bureau / webmaster (checkbox)
    * <s>Radio: Complet/Normal/Trombino</s>
    * Check: Adhésion illégitime (=pas de supplément défini)
    * <s>Select Solde a jour/pas a jour</s>
  * <s>Restreindre liste des sports en fonction du niveau (que les sports d'un prof)</s>	
  * Possibilité recherche restreinte (juste nom/prénom + case envoi email (mais email caché)) pour les simples pratiquants dans leur activité


===Fonctions de saisie/modification===
  * Gestion de privilèges descendante (Bureau peut attribuer droit prof)
    * Notification email prof bureau en cas de modif de ses droits
      * (BP) Préférences notification weekly/daily/a chaque fois/non
    * Privilèges détectés par les tables de hash responsables
      * Donne droit modification sur tout (sauf responsable) ce qui est  à son niveau et en dessous
      * Donne droit a donner des droits (=designer un responsable) seulement sur ce qui est en dessous et dans la même association
    * Administrateur : champ privilège à 1 dans table adhérent
  * Ajout Enregistrement paiement -> bureau
  * Table de hash asso/section (initialisée par création section)--> défini qui a le droit supprimer/modifier la section y compris les suppléments + donne le droit de recherche
    * Les suppléments définissent un droit de recherche sur les sections/etc... aussi bien avec id_asso_paie que id_asso_adh
  * Association 
    * Ajout entité
    * Ajout Supplément
    * Ajout Responsable
  * Section
    * Ajout entité
    * Ajout Supplément
    * Ajout Responsable
    * Ajout (mais pas suppression) d'association gestionnaire dans la table de hash
  * Activité
    * Ajout entité
    * Ajout Supplément
    * Ajout Responsable
  * Créneau
    * Ajout entité
    * Ajout Supplément
    * Ajout Responsable
  * Paiement
    * Ajout entité : par bureau de sup.id_asso_paie
  * Adhésion
  * Fiche Adhérent

	
=== Envoi d'Email===
  * bien gérer le from
    * Bureau-asesco.asso@u-psud.fr si c'est un membre du bureau, adresse email prof sinon
  * Bien gérer le to
    * Vérifier qu'on envoie pas l'email deux fois à une même personne
    * Un email par personne ; question timer/repartition dans le temps
  * Conserver un copie des mails envoyés : envoyer l'email au from

Champs bases:
https: fichier de config fliker.conf


===Alertes===
  * Interface pour gérer (activer/désactiver/déclencher manuellement/daily,weekly etc...) les alertes
    * /!\ Gens pas à jour (solde != 0)
    * /!\ Pas de certificats médical (surtout pour compétiteurs)
    * /!\ Pas de sport
    * /!\ Pas de confirmation par email
  * Peu urgent: interface pour créer des alertes


===plugin LDAP===
  * booléen d'activation du check + params connexion dans table/config
  * champs validation LDAP : 3 valeurs : faux/vrai/desactivé


===plugins paiements en ligne===
  * SoGé ?
  * Paypal ?


===plugin "inventaire"===
  * stocker les achats de matériel pour chaque section
    * date (promo) d'acquisition, coût, upload pdf devis/facture, etc.
    * fonction d'affichage (tri par promo, par coût, par nom)
    * fonction de saisie/modif/suppresion


===Synoptiques/Statistiques===
  * tableau promos / sections
    * nbr d'inscrits à jour (par assos)
    * nbr d'inscrits assidus mais pas à jour (par assos)
    * nbr touristes = pas assidus et pas à jour (par assos)
    * recettes (total des suppléments) & dépenses (cf. plugin inventaire) & bilan annuel (+ bilan annuel cumulé des sections = asso)


===Table de Customisation / admin===
  * stocker/modifier Bornes de la Promo courante
    * actuellement hardcodé = (next Monday after 31/08 -> sem du 30/06)