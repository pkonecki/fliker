
== Notes ==

===Urgence===

  * Table types de suppléments (cotiz,location, caution, supplément)
  * Table types de paiements (cheque/espece/cb/dispense)
  * Association destinataire table supplément
  * Table mère pour asso/section/act/cre
  * Adhesion: Ne pas afficher les créneaux sans prof/responsables au dessus
  * 

===notion de promo pour paiement/adhésion===
  * <s>Champ promo dans adhesion/paiement</s>
  * Notion de promo courante: stocker la valeur, + la borne de la valeur (date)

===Lien paiement < - > adhésion===
  * <s>Faire table de hash </s>

===Adhérent : id_asso/num_carte -> table (plusieurs assos pour un adherent) ===
  * <s>Faire table de hash</s>

===Table adhérent ===
  * <s>modularité : deux tables, description ...</s>
  * <s>vérification : langage simplifié de format (à determiner)</s>
  * Séparer données login/données perso? Customisation supplémentaire assos locales	
  * -preinscription  --> +date creation
  * <s>+signature valide quand adresse email validée</s>
  * +adresse professionnelle (cf customisation locale PSUC)
  * <s>+numéro d'agent</s>(cf numayantdroit : numéro de carte étudiant/CNRS etc...)
  * +champ exemple dans champs_adherent
  * +choix assurance : j'ai lu ou non / j'accepte ou non
  * +droit à l'image oui/non
  * <s>numcarte = numéro de carte asesco/PSUC etc...</s>
  * Champs date validation cookie/gestionnaire
  * Deux champs nom / tel pour personnes à contacter en cas d'urgence
  * + Statut (exterieur/CNRS/UFR Science/Droit/Pharma/Medecine/STAPS/IUT Orsay/Cachan/Sceaux/Polytech'ParisSud/Supoptique/Supélec/X/INRIA/CEA/autres académique)
  * Vérification : case a cocher pour certain champs (doit être verifier) ex: numayantdroit/certificat med
    * LDAP utilisera cette case
    * Table de hash champ adherent <-> adherent + date

===Paiement===
  * Numéro de carte asesco: en générer un qu'a partir du moment ou l'inscription est validée/payée
    * possibilité de créer un nouveau numéro (carte perdue)
    * ne pas créer un numéro si il existe déjà
    * Boite avec propositions de numéro libres et possibilité de remplir un numéro à la main en vérifiant la disponibilité à la volée

===Inscription:===
  * <s>conservation données en post</s>
  * captcha? en confirmation (basse priorité)
  * <s>identifiant : email</s>
    * Demander 2 fois email
  * <s>gestion de password</s>
    * Mot de passe : à la vérification, <s>encryption md5</s> + salt
  * liste des sports:
    * page séparée : oui
    * liste dynamique en fct statut (etu/pers) /age/critères personalisés(prix/lieu/type/horaire)...
    * encourager l'inscription chez d'autres assos (liste unique + pop up d'info hover)
  * Scénario d'inscription:
    * recherche par critère (portail sport) --> inscription
    * inscription -->liste de sports alphabétique
  * Stocker dans un repertoire en modifiant le nom du fichier : id.ext		
    * Certificat médical
    * <s>photo</s>
    * Métadata des champs images:
      * Permanent o/n
      * Date de purge
      * Age de purge
      * Extension du format par défaut
      * Taille de redimensionnement par défaut
      * Taille thumb
  * Compétiteur : vrai /faux
    * Basse priorité
    * Gestion via fonctions existantes (section/activité/supplément) : documenter
  * Case a cocher : je n'ai pas d'adresse email
    * Possibilité de rajouter l'adresse email par le bureau plus tard --> envoie d'email de confirmation
  * Catégorie Homme/Femme --> Masculin/Féminin

===Table des sports===
  * Catégorie (basse priorité) : table de catégories + table de hash activité/categorie
    * Fonction de saisie/modif catégorie d'activité pour responsable activité + admin etc... 

	
===Fonctions de saisie/modification===
  * Gestion de privilèges descendante (Bureau peut attribuer droit prof)
    * Notification email prof bureau en cas de modif de ses droits
      * (BP) Préférences notification weekly/daily/a chaque fois/non
    * Privilèges détectés par les tables de hash responsables
      * Donne droit modification sur tout (sauf responsable) ce qui est  à son niveau et en dessous
      * Donne droit a donner des droits (=designer un responsable) seulement sur ce qui est en dessous et dans la même association
    * Administrateur : champ privilège à 1 dans table adhérent
  * Ajout Enregistrement paiement -> bureau
  * Table de hash asso/section (initialisée par création section)--> défini qui a le droit supprimer/modifier la section y compris les suppléments + donne le droit de recherche
    * Les suppléments définissent un droit de recherche sur les sections/etc... aussi bien avec id_asso_paie que id_asso_adh
  * Association 
    * Ajout entité
    * Ajout Supplément
    * Ajout Responsable
  * Section
    * Ajout entité
    * Ajout Supplément
    * Ajout Responsable
    * Ajout (mais pas suppression) d'association gestionnaire dans la table de hash
  * Activité
    * Ajout entité
    * Ajout Supplément
    * Ajout Responsable
  * Créneau
    * Ajout entité
    * Ajout Supplément
    * Ajout Responsable
  * Paiement
    * Ajout entité : par bureau de sup.id_asso_paie
  * Adhésion
  * Fiche Adhérent

	
===Recherche:===
  * Recherche modulaire : 
    * <s>Ajouter regles de recherche / et </s>/ou
    * <s>Par defaut: nom,prénom,email,catégorie (détecter si vide) -> utiliser table des champs</s>
    * Selection des colonnes à afficher
  * Critères:
    * <s>Nom, Prénom, Email, Catégorie (masculin/féminin)</s>
    * <s>Par créneau, activité, section, asso, --> menu arbre</s>
      * Décocher automatiquement si vide en dessous
    * <s>Check : Avec ou sans photo</s>
    * Afficher seulement les profs / bureau / webmaster (checkbox)
    * <s>Radio: Complet/Normal/Trombino</s>
    * Check: Adhésion illégitime (=pas de supplément défini)
    * <s>Select Solde a jour/pas a jour</s>
  * <s>Restreindre liste des sports en fonction du niveau (que les sports d'un prof)</s>
	


===Alertes===
  * Interface pour gérer (activer/désactiver/déclencher manuellement/daily,weekly etc...) les alertes
    * /!\ Gens pas à jour (solde != 0)
    * /!\ Pas de certificats médical (surtout pour compétiteurs)
    * /!\ Pas de sport
    * /!\ Pas de confirmation par email
  * Peu urgent: interface pour créer des alertes
	
=== Envoi d'Email===
  * bien gérer le from
    * Bureau-asesco.asso@u-psud.fr si c'est un membre du bureau, adresse email prof sinon
  * Bien gérer le to
    * Vérifier qu'on envoie pas l'email deux fois à une même personne
    * Un email par personne ; question timer/repartition dans le temps
  * Conserver un copie des mails envoyés : envoyer l'email au from

Champs bases:
https: fichier de config fliker.conf




===Changements UML:===
    * <s>Nouveau supplément_cotisation asso</s>
    * <s>Supprimer champs cotisation dans asso</s>
    * <s>Généraliser Responsables (idem suppléments)</s>
    * <s>Supprimer lien id_prof adherent <> créneau</s>
    * <s>généraliser supplément sections / activité / creneaux </s>
    * <s>question association gestionnaire (reverser le supplément à la bonne association)</s>
    * champs validation LDAP : 3 valeurs : faux/vrai/desactivé

===Table section===
    * <s>description</s>
    * <s>logo</s>

===Table présence (basse priorité)===
    * Table de hash créneau + adhérent
    * Fonction pour générer fiche de présence
    * Fonction pour remplir présence : tableau adhérent / créneau --> case a cocher
    * Fonction pour générer et archiver stats + purge table en fin d'année


===Calcul appartenance association===
  * Tables des statuts (etudiant/personel/exterieur)
  * +table d'associations possibles pour un statut (ex: etudiant -->Asesco et PSUC)
  * Choix des créneaux
  * Calcul des associations auxquelles s'inscrire par critère de priorité :
    # Maximum de sports
    # Minimum d'associations
    # Cout minimum
    # Random si plusieurs choix (rare)